(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.YScroll=t()}})(this,function(){var e=window,t=document,r=Math.round,n=Math.abs;var i=function(e,t){var i=this,a=t.createElement("div"),s=["webkit"],o={};var c=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};var l=function(e,t){for(var r=0,n=e.length;r<n;r++){if(t(e[r],r)){return true}}return false};var u=function(e){if(a.style[e]!==undefined){return e}else{var t;l(s,function(r){var n=c(r)+c(e);if(a.style[n]!==undefined){t="-"+r+"-"+e;return true}});return t}};var f=function(e,t,r){var n=o[t];if(n){e[n]=r}else if(e[t]!==undefined){o[t]=t;e[t]=r}else{l(s,function(n){var i=c(n)+c(t);if(e[i]!==undefined){o[t]=i;e[i]=r;return true}})}};var d=function(e){return l(e,function(e){return a.style[e]!==undefined})};i.some=l;i.getCSSVal=u;i.setStyle=f;i.saveProp=o;i.hasProp=d;i.getTriangleSide=function(e,t,r,i){var a=n(e-r);var s=n(t-i);var o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));return{x:a,y:s,z:o}};i.getAngle=function(e){var t=e.y/e.z;var r=Math.acos(t);return 180/(Math.PI/r)};i.momentum=function(e,t,i,a,s,o){var c=e-t,l=n(c)/i,u=6e-4,f,d;f=e+l*l/(2*u)*o;d=l/u;if(f<a){f=s?a-s/2.5*(l/8):a;c=n(f-e);d=c/l}else if(f>0){f=s?s/2.5*(l/8):0;c=n(e)+f;d=c/l}return{destination:r(f),duration:d}};return i}(e,t,undefined);function a(e,t){return this instanceof a?this.init.call(this,e,t):new a(e,t)}a.prototype={constructor:a,ease:{quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)",back:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",elastic:"cubic-bezier(0, 0, 0.25, 1)"},DISTANCE_THRESHOLD:5,ANGLE_THREHOLD:55,init:function(e,r){var n=this;if(typeof e==="string"){e=t.querySelector(e)}if(!e){throw new Error("element not found")}r=r||{};n.distance=r.distance;n.bounceTime=r.bounceTime||350;n.isScroll=n.distance===undefined?true:false;n.curDist=0;n.gestureStart=false;n.events={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel",transitionend:i.hasProp(["transition"])?"transitionend":"webkitTransitionEnd"};if(n.isScroll){n.scroller=e.children[0];n.wrapperWidth=e.clientWidth;n.maxDist=n.wrapperWidth-n.scroller.clientWidth;n.scroller.addEventListener(n.events.transitionend,n,false);n.bounceEasing=n.ease["quadratic"]}else{n.scroller=e;n.curPoint=0;n.maxPoint=e.children.length-1;n.maxDist=-n.distance*(n.maxPoint-1);n.bounceEasing=n.ease["elastic"]}n.scrollerStyle=n.scroller.style;n._setStyle({transitionProperty:i.getCSSVal("transform"),transitionTimingFunction:n.bounceEasing,transitionDuration:"0ms",transform:n._getTranslate(0,0)});n.scroller.addEventListener(n.events.start,n,false);return n},handleEvent:function(e){var t=this,r=t.events;switch(e.type){case r.start:t._start(e);break;case r.move:t._move(e);break;case r.end:t._end(e);break;case r.cancel:t._end(e);break;case r.transitionend:t._transitionEnd(e);break;case"click":t._click(e);break}},_start:function(e){var r=this;if(r.scrolling){return}r.scroller.addEventListener(r.events.move,r,false);t.addEventListener(r.events.end,r,false);var n=e.changedTouches?e.changedTouches[0]:e;r._setStyle({transitionDuration:"0ms"});r.startPageX=n.pageX;r.startPageY=n.pageY;r.basePageX=r.startPageX;r.basePageY=r.startPageY;r.direction=0;r.scrolling=true;r.moveReady=false;r.startTime=e.timeStamp;r.endTime=0;r._triggerEvent("sTouchstart",true,false)},_move:function(e){var t=this;if(!t.scrolling){return}var n=e.changedTouches?e.changedTouches[0]:e,a=n.pageX,s=n.pageY;if(t.moveReady){e.preventDefault();var o=a-t.basePageX,c=t.curDist+o;if(c>=0||c<t.maxDist){c=r(t.curDist+o/3)}t.direction=o===0?t.direction:o>0?1:-1;var l=!t._triggerEvent("sTouchmove",true,true,{delta:o,direction:t.direction});if(l){t._touchAfter({moved:false,cancelled:true})}else{var u=[c,0];t._setDist.apply(t,u)}}else{var f=i.getTriangleSide(t.startPageX,t.startPageY,a,s);if(f.z>t.DISTANCE_THRESHOLD){if(i.getAngle(f)>t.ANGLE_THREHOLD){e.preventDefault();t.moveReady=true;t.scroller.addEventListener("click",t,true)}else{t.scrolling=false}}}t.basePageX=a;t.basePageY=s},_end:function(e){var r=this;r.scroller.removeEventListener(r.events.move,r,false);t.removeEventListener(r.events.end,r,false);if(!r.scrolling){return}if(r.isScroll){if(!r.resetDist()){var a=e.timeStamp,s=a-r.startTime,o=0,c=r.basePageX,l=n(c-r.startPageX),u;if(s<300&&l>30){u=i.momentum(r.basePageX,r.startPageX,s,r.maxDist,r.wrapperWidth,r.direction);c=u.destination;o=u.duration;r.isInTransition=1}if(r.basePageX!=c){r._scrollTo(c,0,o);r.isInTransition=!!(o>0)}}}else{var f=-r.curDist/r.distance;f=r.direction<0?Math.ceil(f):r.direction>0?Math.floor(f):Math.round(f);if(f<0){f=0}else if(f>r.maxPoint){f=r.maxPoint}r.moveToPoint(f)}r._touchAfter({moved:false,cancelled:false})},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller||!t.isInTransition){return}if(t.resetDist()){t.isInTransition=false}},_click:function(e){e.preventDefault();e.stopPropagation()},enable:function(){this.enabled=true},disable:function(){this.enabled=false},destroy:function(){var e=this;e.scroller.removeEventListener(e.events.start,e,false)},_triggerEvent:function(e,r,n,i){var a=this,s=t.createEvent("Event");s.initEvent(e,r,n);if(i){for(var o in i){if(i.hasOwnProperty(o)){s[o]=i[o]}}}return a.scroller.dispatchEvent(s)},_touchAfter:function(e){var t=this;t.scrolling=false;t.moveReady=false;t.startTime=0;setTimeout(function(){t.scroller.removeEventListener("click",t,true)},200);t._triggerEvent("sTouchend",true,false,e)},_getTranslate:function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"},_setStyle:function(e){var t=this,r=t.scrollerStyle;for(var n in e){i.setStyle(r,n,e[n])}},_setDist:function(e,t){var r=this;r.scrollerStyle[i.saveProp.transform]=r._getTranslate(e,t);r.curDist=e},_scrollTo:function(e,t,r){var n=this,a=n.scrollerStyle,s=i.saveProp;r=r||0;a[s.transform]=n._getTranslate(e,t);a[s.transitionDuration]=r+"ms";n.curDist=e},resetDist:function(){var e=this,t=e.curDist;if(t>0){t=0}else if(t<e.maxDist){t=e.maxDist}if(t==e.curDist){return false}e._setDist(t,0);return true},moveToPoint:function(e,t,r){var n=this,i=n.curPoint;e=e===undefined?n.curPoint:parseInt(e,10);t=t===undefined?n.bounceTime:parseInt(t,10);if(e<0){e=0}else if(e>n.maxPoint){e=n.maxPoint}n.curPoint=e;if(i!=n.curPoint){n._triggerEvent("sPointmove",true,false,{prevPoint:i,curPoint:n.curPoint});setTimeout(function(){n._triggerEvent("sPointAftermove",true,false,{prevPoint:i,curPoint:n.curPoint})},t+50)}n._scrollTo(-n.curPoint*n.distance,0,t);r&&r()}};return a});